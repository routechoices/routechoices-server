{% extends "base.html" %}
{% load static %}
{% load compress %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'styles/site/tracker.css' %}?_=2022022600" />
{% endblock %}

{% block content %}
      <div class="container">
        <div class="row">
          <h1>GPS Trackers</h1>
          <div class="row justify-content-between" style="margin-bottom: 15px">
            <div class="col align-self-center" style="text-align:center"><img style="height: 150px" alt="Smartphone app" src="{% static '/img/iphone_tracker.png' %}"/></div>
            <div class="col align-self-center" style="text-align:center"><img style="height: 150px" alt="Teltonika TMT250" src="{% static '/img/TMT250.png' %}"/></div>
            <div class="col align-self-center" style="text-align:center"><img style="height: 150px" alt="Queclink GL320MG" src="{% static '/img/gl320mg.png' %}"/></div>
            <!--<div class="col col-md-3 col-6"><img style="height: 150px" src="{% static '/img/garmin.png' %}"/></div>-->
          </div>
          <p>Upload of location to provide live GPS tracking can be done in two different way. Using a smartphone application or using a supported dedicated GPS tracker.</p>
          <p>For each method, devices are assigned a unique "device ID" that can be used on this website.</p>
          <p>If interested in acquiring dedicated trackers, contact us for informations about resellers.</p>
          <p>See below more detailed instructions:</p>
          <p style="margin-top:2em; text-align:center">
            <a role="button" class="btn btn-info" id="android-btn"  href="#android" style="margin-bottom: 5px"><i class="fa fa-android"></i> Tracking with an android smartphone</a>
            <a role="button" class="btn btn-primary" id="ios-btn" href="#ios" style="margin-bottom: 5px"><i class="fa fa-apple"></i> Tracking with a iPhone</a>
            <!--<a role="button" class="btn btn-primary" id="traccar-btn" data-toggle="modal" data-target="#traccar-modal" style="margin-bottom: 5px"><i class="fa fa-mobile-phone"></i> Tracking with a IPhone</a> -->
            <a role="button" class="btn btn-danger" id="tmt250-btn" href="#hardware" style="margin-bottom: 5px"><i class="fa fa-globe"></i> Tracking with a dedicated GPS tracker</a>
            <!--<a role="button" class="btn btn-success" id="garmin-btn" data-toggle="modal" data-target="#garmin-modal" style="margin-bottom: 5px"><i class="fa fa-clock-o"></i> Tracking with a Garmin watch</a>-->
          </p>
        </div>
      </div>
      <div id="android" >
        <h4 class="modal-title" id="android-modal-label">Android Tracking App</h4>
        <div>
             <p>
              Download the Routechoices Tracker app for Android.
             </p>
             <p>
              <a href='https://play.google.com/store/apps/details?id=com.routechoices.routechoicestracker'><img alt='Get it on Google Play' height="60" src='{% static "img/google-play-badge.svg" %}'/></a>
             </p>
             <p>
              Upon opening the app, it will display a device ID.
             </p>
             <p>Before starting a event, click the "Start live GPS" button to start sharing the location of the phone with us. And when the event is over, Turn off the app with the "Stop live GPS" button.</p>
             <p>Once the GPS signal is good, the device ID turns green and the app starts uploading its locations.</p>
             <p><i class="fa fa-warning" style="color:red; font-size:1.2em"></i> <b>Ensure that GPS location provider with high accuracy is enabled in the system settings for the app and that GPS access is allowed all the time. If not, uploading GPS data will stop when screen go to sleep.</b></p>
             <p>Note: Google is trying to restrict background processes to give user better battery life, but it affects application like Routechoices Tracker which require persistent background execution. Common issues to check for:
              <ul>
                <li>
                  On recent versions of Android make sure that Routechoices Tracker has been added to battery optimization exceptions.
                </li>
                <li>
                  Some Android vendors have their own battery optimization in addition to standard Android system. Make sure those are disabled or the app is added to exceptions.</p>
                </li>
              </ul>
             </p>
        </div>
      </div>
      <hr/>
      <div id="ios">
            <h4>iOS Tracking App</h4>
            <div>
              <p>
                Download the Routechoices Tracker app for iOS device.
              </p>
              <p>
                 <a href="https://apps.apple.com/us/app/routechoices-tracker/id1570437272?itsct=apps_box_link&itscg=30200"><img alt='Get it on Apple App Store' height="60" src='{% static "img/apple-app-store-badge.svg" %}'/></a>
              </p>
              <p>
                Upon opening the app, it will display a device ID.
               </p>
               <p>Before starting a event, click the "Start live GPS" button to start sharing the location of the phone with us. And when the event is over, Turn off the app with the "Stop live GPS" button.</p>
               <p>Once the GPS signal is good, the device ID turns green and the app starts uploading its locations.</p>
               <p><i class="fa fa-warning" style="color:red; font-size:1.2em"></i> <b>Ensure that GPS location provider with high accuracy is enabled in the system settings for the app and that GPS access is allowed all the time. If not, uploading GPS data will stop when screen go to sleep.</b></p>
             <p>Note: Apple is trying to restrict background processes to give user better battery life, but it affects application like Routechoices Tracker which require persistent background execution. Common issues to check for:
              <ul>
                <li>
                  Make sure that in settings background execution is allowed and Routechoices Tracker has permission to always access location services.
                </li>
                <li>
                  Ensure that the settings in "Settings > Privacy > Location Services > Routechoices Tracker" is set to "Always"
                </li>
              </ul>
            </p>
            </div>
      </div>
      <hr/>
      <div id="hardware">
        <h4>Dedicated GPS Trackers</h4>
        <div>
          <p>
            The dedicated GPS trackers supported are:
            <ul>
              <li>Teltonika TMT250</li>
              <li>Queclink GL200</li>
              <li>Queclink GL3XX series</li>
              <li>Queclink GL5XX series</li>
            </ul>
          </p>
          <p>
            Configure the devices to share data with TCP protocol to server <code>routechoices.com</code> on the following port:
            <ul>
              <li>Teltonika devices: <code>port 2000</code></li>
              <li>Queclink devices: <code>port 2002</code></li>
            </ul>
            Recommended data push interval is 5 seconds and GPS data acquisition interval to 1 second, but feel free to adjust the settings depending on usage as this settings can affect battery life.<br/>
            For more detailed configurations contact us.
          </p>
          <h5>Device ID</h5>
          <p>Devices must be registered by acquiring a device ID (see below) that can be used on this website.</p>
          <p>Once done simply turn on the tracker during events and its locations will be saved to the server.</p>
          <h6>Get a device ID for a tracker</h6>
          <form id="imeiForm">
            <div class="form-group" id=IMEIDiv>
              <label for="IMEI">IMEI</label>
              <input type="text" class="form-control" id="IMEI" aria-describedby="IMEIHelp" placeholder="Enter IMEI" required>
              <small id="IMEIHelp" class="form-text text-muted">This is used to link the physical device with the Routechoices.com platform.</small>
              <div id="imeiErrorMsg" class="invalid-feedback d-none">
                <i class="fa fa-warning"></i> Invalid IMEI
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
          <br/>
          <ul id="imeiDevId" class="well d-none" >
            <li>IMEI <code id="imeiRes"></code></li>
            <li>Device ID: <code class="imeiDevId roboto"></code> <button class="btn btn-small" id="copyDevIdBtn"><i class="fa fa-copy fa-fw"></i></button></li>
          </ul>
        </div>
      </div>
{% endblock %}

{% block extra_body %}
<script src="{% static '/scripts/load-local-variables.js' %}?_=2022072900" data-csrf-token="{{ csrf_token }}"></script>
{% compress js %}
<script src="{% static '/vendor/reqwest-2.0.5/reqwest.min.js' %}"></script>
<script src="{% static '/vendor/umbrella-3.3.0/umbrella.min.js' %}"></script>
<script src="{% static '/scripts/site/tracker.js' %}"></script>
{% endcompress %}
{% endblock %}
